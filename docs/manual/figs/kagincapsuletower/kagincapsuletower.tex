\documentclass[tikz]{standalone}
% \documentclass[tikz,convert={outfile=\jobname.svg}]{standalone}

\input{../../semiotikzcommands.tex}
% \input{/mnt/c/git/semio/docs/manual/semiotikzcommands.tex}


\setmainfont{Times}
%\setmainfont{TeX Gyre Termes}

%scripts

%schemes
\newcommand{\kaginSchemeIcon}{\emoji{🏯}}

\newcommand{\kaginSchemeFloorsParameterIcon}{\emoji{🎚️}}
\newcommand{\kaginSchemeFloorsDifferenceParameterIcon}{\pm}
\newcommand{\kaginSchemeCapsulesParameterIcon}{\prototypeIcon}
\newcommand{\kaginSchemeFloorsBridgesParameterIcon}{≡}


\newcommand{\towerSchemeIcon}{\emoji{🗼}}
\newcommand{\towerSchemeIdParameterIcon}{🆔}
\newcommand{\towerSchemeFloorsParameterIcon}{🎚️}
\newcommand{\towerSchemeElevatorSideParameterIcon}{\emoji{🧭}}
\newcommand{\towerSchemeCapsulesParameterIcon}{\prototypeIcon}


\newcommand{\sideSchemeIcon}{\emoji{🏢}}
\newcommand{\sideSchemeIdParameterIcon}{🆔}
\newcommand{\sideSchemeSideParameterIcon}{🧭}
\newcommand{\sideSchemeCapsulesParameterIcon}{\prototypeIcon}

%transformations
\newcommand{\towerRuleIcon}{\emoji{🏭}}
\newcommand{\towerRuleIdParameterIcon}{🆔}
\newcommand{\towerRuleFloorsParameterIcon}{🎚️}
\newcommand{\towerRuleElevatorSideParameterIcon}{\emoji{🧭}}
\newcommand{\stackRuleIcon}{\emoji{📚}}

\newcommand{\stackRuleIdParameterIcon}{🆔}
\newcommand{\stackRuleSideParameterIcon}{🧭}
\newcommand{\stackRuleDoorParameterIcon}{\emoji{🏅}}
\newcommand{\stackRuleCapsulesParameterIcon}{\prototypeIcon}

\newcommand{\bridgeRuleIcon}{\emoji{🛣️}}
\newcommand{\bridgeRuleIdFirstParameterIcon}{⬅️}
\newcommand{\bridgeRuleIdSecondParameterIcon}{➡️}
\newcommand{\bridgeRuleFloorParameterIcon}{🎚️}


%definitions
\newcommand{\baseDefinitionIcon}{\emoji{🏫}}
\newcommand{\baseDefinitionParcelParameterIcon}{\emoji{↪️}}
\newcommand{\baseDefinitionHeightParameterIcon}{\emoji{↕️}}
\newcommand{\baseDefinitionFloorHeightParameterIcon}{\emoji{🔼}}
\newcommand{\baseDefinitionCorePrimaryLengthParameterIcon}{\emoji{⬅️}}
\newcommand{\baseDefinitionCoreSecondaryLengthParameterIcon}{\emoji{➡️}}
\newcommand{\baseDefinitionCoresDistanceParameterIcon}{\emoji{↔️}}
\newcommand{\baseDefinitionCorePrimaryPortIcon}{\emoji{🅰️}}
\newcommand{\baseDefinitionCoreSecondaryPortIcon}{\emoji{🅱️}}


\newcommand{\shaftDefinitionIcon}{\emoji{🛗}}
\newcommand{\shaftDefinitionLengthParameterIcon}{\emoji{📏}}
\newcommand{\shaftDefinitionWidthParameterIcon}{\emoji{↔️}}
\newcommand{\shaftDefinitionHeightParameterIcon}{\emoji{↕️}}
\newcommand{\shaftDefinitionFloorsParameterIcon}{\emoji{🎚️}}
\newcommand{\shaftDefinitionElevatorSideParameterIcon}{\emoji{🧭}}
\newcommand{\shaftDefinitionSidePortIcon}{\emoji{🧭}}
\newcommand{\shaftDefinitionDoorNumberPortIcon}{\emoji{🏅}}
\newcommand{\shaftDefinitionDoorFirstPortIcon}{\emoji{🥇}}
\newcommand{\shaftDefinitionDoorSecondPortIcon}{\emoji{🥇}}
\newcommand{\shaftDefinitionTopPortIcon}{\emoji{⬆️}}
\newcommand{\shaftDefinitionDownPortIcon}{\emoji{⬇️}}


\newcommand{\sDWOODPI}{\emoji{⬅️}1\emoji{🥇}\emoji{🚪}}


\newcommand{\capitalDefinitionIcon}{\emoji{🎓}}
\newcommand{\capitalDefinitionLengthParameterIcon}{\emoji{📏}}
\newcommand{\capitalDefinitionWidthParameterIcon}{\emoji{↔️}}
\newcommand{\capitalDefinitionHeightParameterIcon}{\emoji{↕️}}
\newcommand{\capitalDefinitionRightHeightParameterIcon}{\emoji{↩️}}
\newcommand{\capitalDefinitionLeftHeightParameterIcon}{\emoji{↪️}}
\newcommand{\capitalDefinitionLowerHeightParameterIcon}{\emoji{⏬}}
\newcommand{\capitalDefinitionDownPortIcon}{\emoji{⬇️}}

\newcommand{\capsuleDefinitionIcon}{\emoji{📦}}
\newcommand{\capsuleDefinitionLengthParameterIcon}{\emoji{📏}}
\newcommand{\capsuleDefinitionWidthParameterIcon}{\emoji{↔️}}
\newcommand{\capsuleDefinitionHeightParameterIcon}{\emoji{↕️}}
\newcommand{\capsuleDefinitionDoorParameterIcon}{\emoji{🚪}}
\newcommand{\capsuleDefinitionWindowParameterIcon}{\emoji{🪟}}
\newcommand{\capsuleDefinitionDownPortIcon}{\emoji{🚪}}


\newcommand{\bridgeDefinitionIcon}{\emoji{🌉}}
\newcommand{\bridgeDefinitionLeftLengthParameterIcon}{\emoji{⬅️}}
\newcommand{\bridgeDefinitionRightLengthParameterIcon}{\emoji{➡️}}
% \newcommand{\bridgeDefinitionAdditionLengthParameterIcon}{\emoji{➕}}
\newcommand{\bridgeDefinitionWidthParameterIcon}{\emoji{↔️}}
\newcommand{\bridgeDefinitionHeightParameterIcon}{\emoji{↕️}}
\newcommand{\bridgeDefinitionToleranceParameterIcon}{\emoji{🤏}}
\newcommand{\bridgeDefinitionRightPortIcon}{\emoji{➡️}}
\newcommand{\bridgeDefinitionLeftPortIcon}{\emoji{⬅️}}


%modifications
\newcommand{\mirrorModificationIcon}{\emoji{🪞}}
\newcommand{\mirrorModificationPlaneIcon}{\emoji{✈️}}

%stichings
\newcommand{\capsuleStitchingIcon}{\emoji{🍢}}
\newcommand{\capsuleStitchingSideParameterIcon}{\emoji{🧭}}
\newcommand{\capsuleStitchingFloorParameterIcon}{\emoji{🎚️}}
\newcommand{\capsuleStitchingDoorParameterIcon}{\emoji{🏅}}

%generations
\newcommand{\windowGenerationIcon}{\emoji{☀️}}
\newcommand{\windowGenerationSideParameterIcon}{\emoji{🧭}}

\newcommand{\baseIcon}{\normalsize\baseDefinitionIcon}
\newcommand{\shaftIcon}{\small\shaftDefinitionIcon}
\newcommand{\capitalIcon}{\footnotesize\capitalDefinitionIcon}
\newcommand{\bridgeIcon}{\scriptsize\bridgeDefinitionIcon}
\newcommand{\capsuleIcon}{\tiny\capsuleDefinitionIcon}

% \tikzexternalize[prefix=figures/]

% First parameter value, second type
\newcommand{\parameterWithType}[2]{\overbrace{#1}^{#2}}
% parameters [except last], last parameter
\newcommand{\parameters}[2]{\left(\foreach \p in {#1}{\p,}#2\right)}
%script name, parameters [except last], last parameter
\newcommand{\scriptCall}[3]{$\memoji{#1}\parameters{#2}{#3}$}
\newcommand{\capsuleParameters}[2]{\left(\memoji{#1},\memoji{#2}\right)}
\newcommand{\horizontalDots}{\CIRCLE\CIRCLE\CIRCLE}

\newcommand{\towerANorthFirstCapsuleParameters}{
    \begin{bmatrix}
    \memoji{🪞}\\
    \memoji{⤵️}\\
    \memoji{🪞}\\
    \memoji{⤵️}\\
    \memoji{🪞}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{🪞}\\
    \memoji{🪞}\\
    \memoji{🪞}\\
    \memoji{⤵️}\\
    \end{bmatrix}}
\newcommand{\towerANorthSecondCapsuleParameters}{
    \begin{bmatrix}
    -\\
    -\\
    -\\
    -\\
    -\\
    -\\
    -\\
    -\\
    -\\
    -\\
    -\\
    \end{bmatrix}}
\newcommand{\towerBWestFirstCapsuleParameters}{
    \begin{bmatrix}
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \memoji{⤵️}\\
    \end{bmatrix}}
\newcommand{\towerBWestSecondCapsuleParameters}{
    \begin{bmatrix}
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \memoji{⤴️}\\
    \end{bmatrix}}

\newcommand{\initialSchemeContent}{
    \scriptCall{\kaginSchemeIcon}
    {10,1,\parameters{\parameters\towerANorthCapsuleParameters\horizontalDots}{\parameters\horizontalDots\towerBWestCapsuleParameters}}
    {\begin{bmatrix}3\\6\\9\end{bmatrix}}}


\newcommand{\towerANorthCapsuleParameters}{
    \parameters
    {\towerANorthFirstCapsuleParameters}
    {\towerANorthSecondCapsuleParameters}}
\newcommand{\towerBWestCapsuleParameters}{
    \parameters
    {\towerBWestFirstCapsuleParameters}
    {\towerBWestSecondCapsuleParameters}}

\newcommand{\towerASchemeContent}{
    \scriptCall{\towerSchemeIcon}{ 
    \memoji{🅰️},
    11,
    \memoji{➡️}}
    {\parameters\towerANorthCapsuleParameters\horizontalDots}}

\newcommand{\towerBSchemeContent}{
    \scriptCall{\towerSchemeIcon}{
    \memoji{🅱️},
    9,
    \memoji{⬅️}}
    {\parameters\horizontalDots\towerBWestCapsuleParameters}}

\newcommand{\bridgeRuleContent}[1]{
    \scriptCall{\bridgeRuleIcon}{\memoji{🅰️},\memoji{🅱️}}{#1}}
\newcommand{\bridgeThreeRuleContent}{\bridgeRuleContent{3}}
\newcommand{\bridgeSixRuleContent}{\bridgeRuleContent{6}}
\newcommand{\bridgeNineRuleContent}{\bridgeRuleContent{9}}

\newcommand{\towerRuleContent}[3]{{\scriptCall{🏭}{\memoji{#1},#2}{\memoji{#3}}}}
\newcommand{\towerARuleContent}{\towerRuleContent{🅰️}{11}{➡️}}
\newcommand{\towerBRuleContent}{\towerRuleContent{🅰️}{9}{⬅️}}

\newcommand{\sideSchemeContent}[3]{
    \scriptCall{\sideSchemeIcon}{\memoji{#1},\memoji{#2}}{#3}}
\newcommand{\towerASideNorthSchemeContent}{
    \sideSchemeContent{🅰️}{⬆️}{\towerANorthCapsuleParameters}}
\newcommand{\towerBSideWestSchemeContent}{
    \sideSchemeContent{🅱️}{⬅️}{\towerBWestCapsuleParameters}}

\newcommand{\stackContent}[4]{
    \scriptCall{\stackRuleIcon}{\memoji{#1},\memoji{#2},\memoji{#3}}{#4}}
\newcommand{\towerASideNorthStackFirstContent}{
    \stackContent{🅰️}{⬆️}{🥇}{\towerANorthFirstCapsuleParameters}}
\newcommand{\towerBSideWestStackSecondContent}{
    \stackContent{🅱️}{⬅️}{🥈}{\towerBWestSecondCapsuleParameters}}

\newcommand{\dotsContent}{{$\horizontalDots$}}

% |[-14,9.6]|/6=3.93333
% \newcommand{\designSpacing}{3.93333}
\newcommand{\designSpacing}{3.6}
\newcommand{\scriptLegendInnerSep}{2.45pt}



% NW Isonometry: z={(90:10mm)},x={(150:10mm)},y={(30:10mm)}
% z={(90:10mm)},x={(170:10mm)},y={(10:10mm)}
% \newcommand{\axonometryPlaneX}{x={(170:10mm)}}
% \newcommand{\axonometryPlaneY}{y={(10:10mm)}}
% \newcommand{\axonometryPlaneZ}{z={(90:10mm)}}

\tikzset{
    base/.style={circle,minimum size=3ex,inner sep=0pt, outer sep=0pt,anchor=center},
    shaft/.style={circle,minimum size=2ex,inner sep=0pt, outer sep=0pt,anchor=center},
    capital/.style={circle,minimum size=1ex,inner sep=0pt, outer sep=0pt,anchor=center},
    bridge/.style={circle,minimum size=2pt,inner sep=0pt, outer sep=0pt,anchor=center},
    capsule/.style={circle,minimum size=2pt,inner sep=0pt, outer sep=0pt,anchor=center},
}

% /mnt/c/git/semio/docs/manual/figs/kagincapsuletower/
\tikzset{
  bD/.pic={\input{defs/base.tikz.tex}},
  sD/.pic={\input{defs/shaft.tikz.tex}},
  brD/.pic={\input{defs/bridge.tikz.tex}},
  cpD/.pic={\input{defs/capital.tikz.tex}},
  cD/.pic={\input{defs/capsule.tikz.tex}},
  mod-o-m/.pic={\input{mods/mirrororiginal.tikz.tex}},
  mod-m-m/.pic={\input{mods/mirroryz.tikz.tex}},
  trf-r-t/.pic={\input{trfs/towerr.tikz.tex}},
  trf-l-t/.pic={\input{trfs/towerl.tikz.tex}},
  trf-r-s/.pic={\input{trfs/stackr.tikz.tex}},
  trf-l-s/.pic={\input{trfs/stackl.tikz.tex}},
  trf-r-b/.pic={\input{trfs/bridger.tikz.tex}},
  trf-l-b/.pic={\input{trfs/bridgel.tikz.tex}}}
    
\tikzset{
    iL/.pic={\node [base,new] (b) {\baseIcon};},
    tAL/.pic={
    \begin{scope}[scale=0.98]
        \node [base] (b) at (0,0){\baseIcon};
        \node [shaft,new] (s) at (0,2.5){\shaftIcon};
        \node [capital,new] (cp) at (0,5){\capitalIcon};
        \draw[new] (b) -- (s) -- (cp);
    \end{scope}},
    tASNSRL/.pic={
    \begin{scope}[scale=0.98,z={(90:10mm)},x={(170:10mm)},y={(10:10mm)}]
        \input{lyts/tASNSRL.tikz.tex}
    \end{scope}},
    tASNSFL/.pic={
    \begin{scope}[scale=0.98,z={(90:10mm)},x={(170:10mm)},y={(10:10mm)}]
        \input{lyts/tASNSFL.tikz.tex}
    \end{scope}
    },
    tBL/.pic={
    \begin{scope}[z={(90:10mm)},x={(170:10mm)},y={(10:10mm)}]
        \input{lyts/tBL.tikz.tex}
    \end{scope}
    },
    tBSWSSL/.pic={
    \begin{scope}[z={(90:10mm)},x={(170:10mm)},y={(10:10mm)}]
        \input{lyts/tBSWSSL.tikz.tex}
    \end{scope}},
    bTL/.pic={
    \begin{scope}[z={(90:10mm)},x={(170:10mm)},y={(10:10mm)}]
        \input{lyts/bTL.tikz.tex}
    \end{scope}},
    bNL/.pic={
    \begin{scope}[z={(90:10mm)},x={(10:10mm)},y={(170:10mm)}]
        \input{lyts/bNL.tikz.tex}
    \end{scope}
    },
    iD/.pic={
    \begin{design}
        \input{dsns/iD.tikz.tex}
    \end{design}},
    tAD/.pic={
    \begin{design}
        \input{dsns/tAD.tikz.tex}
    \end{design}},
    tASNSFD/.pic={
    \begin{design}
        \input{dsns/tASNSFD.tikz.tex}
    \end{design}},
    tASNSRD/.pic={
    \begin{design}
        \input{dsns/tASNSRD.tikz.tex}
    \end{design}},
    tBD/.pic={
    \begin{design}
        \input{dsns/tBD.tikz.tex}
    \end{design}},
    tBSWSSD/.pic={
    \begin{design}
        \input{dsns/tBSWSSD.tikz.tex}
    \end{design}},
    bND/.pic={
    \begin{designLast}
        \input{dsns/bND.tikz.tex}
    \end{designLast}}}


\tikzset{
    artifacts/.pic={
        \begin{boundingBox}{artifacts}{semioGeneralTerm}{0}{0}{}
            \begin{scope}[yshift=0.75cm]
                \begin{boundingBoxWithLabel}{defs}{\textsc{Prototypes}}{semioTerm}{semioTermText}{-8cm}{-4cm}{}
                    \begin{boundingBoxWithLabel}{defs-sD}
                        {$\memoji{\shaftDefinitionIcon}
                            (\memoji{\shaftDefinitionLengthParameterIcon},
                            \memoji{\shaftDefinitionWidthParameterIcon},
                            \memoji{\shaftDefinitionHeightParameterIcon},
                            \memoji{\shaftDefinitionFloorsParameterIcon},
                            \memoji{\shaftDefinitionElevatorSideParameterIcon})$}
                        {semioSpecificTerm}{}{0.05cm}{-6.7cm}{}
                        \pic[scale=0.94] (sD) {sD};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{defs-bD}
                        {$\memoji{\baseDefinitionIcon}
                            (\memoji{\baseDefinitionParcelParameterIcon},
                            \memoji{\baseDefinitionHeightParameterIcon},
                            \memoji{\baseDefinitionFloorHeightParameterIcon},
                            \memoji{\baseDefinitionCorePrimaryLengthParameterIcon},
                            \memoji{\baseDefinitionCoreSecondaryLengthParameterIcon},
                            \memoji{\baseDefinitionCoresDistanceParameterIcon})$}
                        {semioSpecificTerm}{}{0.05cm}{-11.9cm}{}
                        \pic[scale=0.95] (bD) {bD};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{defs-cpD}
                        {$\memoji{\capitalDefinitionIcon}
                            (\memoji{\capitalDefinitionLengthParameterIcon},
                            \memoji{\capitalDefinitionWidthParameterIcon},
                            \memoji{\capitalDefinitionHeightParameterIcon},
                            \memoji{\capitalDefinitionLowerHeightParameterIcon},
                            \memoji{\capitalDefinitionLeftHeightParameterIcon},
                            \memoji{\capitalDefinitionRightHeightParameterIcon})$}
                        {semioSpecificTerm}{}{4.45cm}{1.0cm}{}
                        \pic[scale=0.87] (cpD) {cpD};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{defs-cD}
                        {$\memoji{\capsuleDefinitionIcon}
                            (\memoji{\capsuleDefinitionLengthParameterIcon},
                            \memoji{\capsuleDefinitionWidthParameterIcon},
                            \memoji{\capsuleDefinitionHeightParameterIcon},
                            \memoji{\capsuleDefinitionDoorParameterIcon},
                            \memoji{\capsuleDefinitionWindowParameterIcon})$}
                        {semioSpecificTerm}{}{4.45cm}{-3.3cm}{}
                        \pic[scale=0.885] (cD) {cD};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{defs-brD}
                        {$\memoji{\bridgeDefinitionIcon}
                            (\memoji{\bridgeDefinitionLeftLengthParameterIcon},
                            \memoji{\bridgeDefinitionRightLengthParameterIcon},
                            \memoji{\bridgeDefinitionWidthParameterIcon},
                            \memoji{\bridgeDefinitionHeightParameterIcon},
                            \memoji{\bridgeDefinitionToleranceParameterIcon})$}
                        {semioSpecificTerm}{}{4.6cm}{-7.1cm}{}
                        \pic[scale=0.58] (brD) {brD};
                    \end{boundingBoxWithLabel}
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{trfs}{\textsc{Transformations}}{semioTerm}{semioTermText}{-7.9cm}{-19.6cm}{}
                    \sTransformation{t}
                        {$\memoji{\towerRuleIcon}
                        (\memoji{\towerRuleIdParameterIcon},
                        \memoji{\towerRuleFloorsParameterIcon},
                        \memoji{\towerRuleElevatorSideParameterIcon})$}
                        {0}{0.8cm}{1.2cm}{0}
                    \sTransformation{s}
                        {$\memoji{\stackRuleIcon}
                        (\memoji{\stackRuleIdParameterIcon},
                        \memoji{\stackRuleSideParameterIcon},
                        \memoji{\stackRuleDoorParameterIcon},
                        \stackRuleCapsulesParameterIcon)$}
                        {3.3cm}{0.45cm}{4.6cm}{0.55cm}
                    \sTransformation{b}
                        {$\memoji{\bridgeRuleIcon}
                        (\memoji{\bridgeRuleIdFirstParameterIcon},
                        \memoji{\bridgeRuleIdSecondParameterIcon},
                        \memoji{\bridgeRuleFloorParameterIcon})$}
                        {2cm}{-2.7cm}{6.6cm}{-2.8cm}
                \end{boundingBoxWithLabel}
            \end{scope}
            \begin{scope}[xshift=-0.1cm,yshift=-0.25cm]
                \begin{boundingBoxWithLabel}{gnes}{\textsc{Genes}}{semioTerm}{semioTermText}{2.83cm}{3.3cm}{}
                    \node [semioBoundingBox,semioSpecificTerm,label={[anchor=south west,align=left]north west:\emoji{↩️}}]
                        (gnes-dl) {$[\memoji{🚪}:\memoji{⬇️},\memoji{🪟}:\memoji{⬅️}]$};
                        \node [semioBoundingBox,semioSpecificTerm,label={[anchor=south west,align=left]north west:\emoji{😎}},
                        below=\fitSpacing+2em of gnes-dl.south west,anchor=north west] 
                        (gnes-dl-s) {$[\memoji{↩️},\memoji{🕶️}:\memoji{⬅️}]$};
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{gnrs}{\textsc{Generations}}{semioTerm}{semioTermText}{3.6cm}{-0.2cm}{}
                    \begin{boundingBoxWithLabel}{gnr-wAGt}
                        {$\memoji{\windowGenerationIcon}
                            (\memoji{\windowGenerationSideParameterIcon})$}
                        {semioSpecificTerm}{}{0}{0}{}
                        \node [align=left] (gnr-wAGt)
                        {$\text{\tiny{1}\sTabs{1}\normalsize{return}}[\memoji{🚪}:\memoji{➡️},\memoji{🪟}:\memoji{\windowGenerationSideParameterIcon}]$};
                    \end{boundingBoxWithLabel}
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{prts}{\textsc{Types}}{semioTerm}{semioTermText}{2.82cm}{-2.7cm}{}
                    \begin{boundingBoxWithLabel}{prts-mP}{$\memoji{\capsuleDefinitionIcon}^\memoji{🪞}$}{semioSpecificTerm}{}{0}{0}{}
                        \node (mP) {$(\memoji{\capsuleDefinitionIcon},[\memoji{🪞}(\memoji{↕️})])$};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{prts-blP}{$\memoji{\capsuleDefinitionIcon}^\memoji{↩️}$}{semioSpecificTerm}{}{0}{0}{}
                        \node (blP) [right=\fitSpacing+\horizontalSpacing of prts-mP-bB.east,anchor=west] {$(\memoji{\capsuleDefinitionIcon}(\memoji{↩️}))$};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{prts-ruP}{$\memoji{\capsuleDefinitionIcon}^\memoji{⤴️}$}{semioSpecificTerm}{}{0}{0}{}
                        \node (ruP) [below=\fitSpacing+3em of mP.south west,anchor=north west] {$(\memoji{\capsuleDefinitionIcon}(\memoji{☀️}(\memoji{⬆️})))$};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{prts-rumP}{$\memoji{\capsuleDefinitionIcon}^\memoji{⤵️}$}{semioSpecificTerm}{}{0}{0}{}
                        \node (rumP) [below=\fitSpacing+3em of ruP.south west,anchor=north west] {$(\memoji{\capsuleDefinitionIcon}(\memoji{☀️}(\memoji{⬆️})),[\memoji{🪞}(\memoji{↕️})])$};
                    \end{boundingBoxWithLabel}
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{mods}{\textsc{Modifications}}{semioTerm}{semioTermText}{1.7cm}{-10.5cm}{}
                    \sModification{m}{$\memoji{\mirrorModificationIcon}(\memoji{\mirrorModificationPlaneIcon})$}{\emoji{↕️}}{0}{0}{2.55}{0}{1.12}
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{knts}{\textsc{Knots}}{semioTerm}{semioTermText}{1.6cm}{-13.02cm}{}
                    \begin{boundingBoxWithLabel}{knts-ud}
                        {\emoji{↕️}}{semioSpecificTerm}{}{0}{0}{}
                    \sKnot{knts-ud-l}{knts-ud-r}{\emoji{⬆️}}{\emoji{⬇️}}{1.35cm}{}
                    \end{boundingBoxWithLabel}
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{stc}{\textsc{Stichings}}{semioTerm}{semioTermText}{3.9cm}{-13.05cm}{}
                    \begin{boundingBoxWithLabel}{knts-ud}
                        {$\memoji{\capsuleStitchingIcon}(
                            \memoji{\capsuleStitchingSideParameterIcon},
                            \memoji{\capsuleStitchingFloorParameterIcon},
                            \memoji{\capsuleStitchingDoorParameterIcon})$}
                            {semioSpecificTerm}{}{0}{0}{}
                        \sKnot{knts-ud-l}{knts-ud-r}{$\memoji{\capsuleStitchingSideParameterIcon}\memoji{\capsuleStitchingFloorParameterIcon}\memoji{\capsuleStitchingDoorParameterIcon}$}{\emoji{🚪}}{2.2cm}{}
                    \end{boundingBoxWithLabel}
                \end{boundingBoxWithLabel}
                \begin{boundingBoxWithLabel}{smes}{\textsc{Schemes}}{semioTerm}{semioTermText}{3.73cm}{-15.9cm}{}
                    \begin{boundingBoxWithLabel}{smes-kS}
                        {$\memoji{\kaginSchemeIcon}
                            (\memoji{\kaginSchemeFloorsParameterIcon},
                            \kaginSchemeFloorsDifferenceParameterIcon,
                            \kaginSchemeCapsulesParameterIcon,
                            \kaginSchemeFloorsBridgesParameterIcon)$}
                        {semioSpecificTerm}{}{0}{0}{}
                        \node [align=left] (kS)
                            {$\text{\tiny{1}\sTabs{1}}\memoji{\towerSchemeIcon}(\memoji{🅰️},\memoji{🎚️}+\pm,\memoji{➡️},\kaginSchemeCapsulesParameterIcon[0])$\\
                            $\text{\tiny{2}\sTabs{1}}\memoji{\towerSchemeIcon}(\memoji{🅱️},\memoji{🎚️}-\pm,\memoji{⬅️},\kaginSchemeCapsulesParameterIcon[1])$\\
                            $\text{\tiny{3}\sTabs{1}}$foreach ─ in \kaginSchemeFloorsBridgesParameterIcon:\\
                            $\text{\tiny{4}\sTabs{3}}\memoji{\bridgeRuleIcon}(\memoji{🅰️},\memoji{🅱️},─)$};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{smes-tS}
                        {$\memoji{\towerSchemeIcon}
                            (\memoji{\towerSchemeIdParameterIcon},
                            \memoji{\towerSchemeFloorsParameterIcon},
                            \memoji{\towerSchemeElevatorSideParameterIcon},
                            \towerSchemeCapsulesParameterIcon)$}
                        {semioSpecificTerm}{}{0}{0}{}
                        \node [align=left,below right=\verticalSpacing+2em and \fitSpacing of smes-kS-bB.south west,anchor=north west] (tS)
                            {$\text{\tiny{1}\sTabs{1}}\memoji{\towerRuleIcon}(\memoji{\sideSchemeIdParameterIcon},\memoji{🎚️},\memoji{🧭})$\\
                            $\text{\tiny{2}\sTabs{1}}\memoji{\sideSchemeIcon}(\memoji{\sideSchemeIdParameterIcon},\memoji{⬆️},\towerSchemeCapsulesParameterIcon[0])$\\
                            $\text{\tiny{3}\sTabs{1}}\memoji{\sideSchemeIcon}(\memoji{\sideSchemeIdParameterIcon},\memoji{➡️},\towerSchemeCapsulesParameterIcon[1])$\\
                            $\text{\tiny{4}\sTabs{1}}\memoji{\sideSchemeIcon}(\memoji{\sideSchemeIdParameterIcon},\memoji{⬇️},\towerSchemeCapsulesParameterIcon[2])$\\
                            $\text{\tiny{5}\sTabs{1}}\memoji{\sideSchemeIcon}(\memoji{\sideSchemeIdParameterIcon},\memoji{⬅️},\towerSchemeCapsulesParameterIcon[3])$};
                    \end{boundingBoxWithLabel}
                    \begin{boundingBoxWithLabel}{smes-sS}
                        {$\memoji{\sideSchemeIcon}
                            (\memoji{\sideSchemeIdParameterIcon},
                            \memoji{\sideSchemeSideParameterIcon},
                            \sideSchemeCapsulesParameterIcon)$}
                        {semioSpecificTerm}{}{0}{0}{}
                        \node [align=left,below right=\verticalSpacing+2em and \fitSpacing of smes-tS-bB.south west,anchor=north west] (sS)
                            {$\text{\tiny{1}\sTabs{1}}\memoji{\stackRuleIcon}(\memoji{🆔},\memoji{\stackRuleSideParameterIcon},\memoji{🥇},\sideSchemeCapsulesParameterIcon[0])$\\
                            $\text{\tiny{2}\sTabs{1}}\memoji{\stackRuleIcon}(\memoji{🆔},\memoji{\stackRuleSideParameterIcon},\memoji{🥈},\sideSchemeCapsulesParameterIcon[1])$};
                    \end{boundingBoxWithLabel}
                \end{boundingBoxWithLabel}
            \end{scope}
                \begin{boundingBoxWithLabel}{scrs}{\textsc{Scripts}}{semioGeneralTerm}{semioTermText}{8.2cm}{3.02cm}{scriptLegend}
                    \begin{boundingBox}{scrs-smes}{semioTerm}{0}{0}{}
                    \begin{boundingBox}{scr-sme-k}{semioSpecificTerm}{0}{0}{}
                        \node [align=left] (scr-sme-k)
                            {\emoji{\kaginSchemeIcon} kagin capsule tower\\
                            \sTabs{2}\emoji{\kaginSchemeFloorsParameterIcon} \#floors\\
                            \sTabs{2} \emoji{\kaginSchemeFloorsDifferenceParameterIcon} difference \#floors\\
                            \sTabs{3}\emoji{\kaginSchemeCapsulesParameterIcon} capsule prototypes\\
                            \sTabs{3}≡ floors bridges};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-sme-t}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-sme-k-bB.south west,anchor=north west] (kSc)
                            {\emoji{\towerSchemeIcon} tower\\
                            \sTabs{2}\emoji{\towerSchemeIdParameterIcon} id\\
                            \sTabs{2}\emoji{\towerSchemeFloorsParameterIcon} \#floors\\
                            \sTabs{2}\emoji{\towerSchemeElevatorSideParameterIcon} elevator side\\
                            \sTabs{3}\emoji{\towerSchemeCapsulesParameterIcon} capsule prototypes};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-sme-s}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-sme-t-bB.south west,anchor=north west] (kSc)
                            {\emoji{\sideSchemeIcon} façade\\
                            \sTabs{2}\emoji{\sideSchemeIdParameterIcon} tower id\\
                            \sTabs{2}\emoji{\sideSchemeSideParameterIcon} side\\
                            \sTabs{3}\emoji{\sideSchemeCapsulesParameterIcon} capsule prototypes};
                    \end{boundingBox}
                    \end{boundingBox}
                    \begin{boundingBox}{scrs-trfs}{semioTerm}{0}{0}{}
                    \begin{boundingBox}{scr-trf-t}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing+\verticalSpacing and \scriptLegendInnerSep of scr-sme-s-bB.south west,anchor=north west] (scr-trf-t)
                            {\emoji{\towerRuleIcon} tower placement\\
                            \sTabs{2}\emoji{\towerRuleIdParameterIcon} shaft id\\
                            \sTabs{2}\emoji{\towerRuleFloorsParameterIcon} \#floors\\
                            \sTabs{2}\emoji{\towerRuleElevatorSideParameterIcon} elevator side};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-trf-s}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-trf-t-bB.south west,anchor=north west] (scr-trf-s)
                            {\emoji{\stackRuleIcon} stack placement\\
                            \sTabs{2}\emoji{\stackRuleIdParameterIcon} shaft id\\
                            \sTabs{2}\emoji{\stackRuleSideParameterIcon} façade\\
                            \sTabs{2}\emoji{\stackRuleDoorParameterIcon} door number\\
                            \sTabs{3}\emoji{\stackRuleCapsulesParameterIcon} capsule prototypes};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-trf-b}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-trf-s-bB.south west,anchor=north west] (scr-trf-b)
                            {\emoji{\bridgeRuleIcon} bridge placement\\
                            \sTabs{2}\emoji{\bridgeRuleIdFirstParameterIcon} left shaft id\\
                            \sTabs{2}\emoji{\bridgeRuleIdSecondParameterIcon} right shaft id\\
                            \sTabs{2}\emoji{\bridgeRuleFloorParameterIcon} floor};
                    \end{boundingBox}
                    \end{boundingBox}
                    \begin{boundingBox}{scrs-defs}{semioTerm}{0cm}{0}{}
                    \begin{boundingBox}{scr-def-b}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing+\verticalSpacing and \scriptLegendInnerSep of scr-trf-b-bB.south west,anchor=north west] (scr-def-b)
                            {\emoji{\baseDefinitionIcon} base building\\
                            \sTabs{2}\baseDefinitionParcelParameterIcon parcel curve [\tikz \draw svg {M1.34,0 L6.44,2.11 L5.61,4.25 L0.69,4.25 L0,3.46 z};]\\
                            \sTabs{2}\baseDefinitionHeightParameterIcon ground floor \\
                            \sTabs{4}height[3m]\\
                            \sTabs{2}\baseDefinitionFloorHeightParameterIcon floor height[3.5m]\\
                            \sTabs{2}\baseDefinitionCorePrimaryLengthParameterIcon primary core\\
                            \sTabs{4}length[6m]\\
                            \sTabs{2}\baseDefinitionCoreSecondaryLengthParameterIcon secondar core\\ 
                            \sTabs{4}length[6m]\\
                            \sTabs{2}\baseDefinitionCoresDistanceParameterIcon distance between\\
                            \sTabs{4}cores[5.7m]};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-def-s}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-def-b-bB.south west,anchor=north west] (scr-trf-s)
                            {\shaftDefinitionIcon shaft\\
                            \sTabs{2}\shaftDefinitionLengthParameterIcon length[6m]\\
                            \sTabs{2}\shaftDefinitionWidthParameterIcon width[6m]\\
                            \sTabs{2}\shaftDefinitionHeightParameterIcon floor height[3m]\\
                            \sTabs{2}\shaftDefinitionFloorsParameterIcon \#floors[10]\\
                            \sTabs{2}\shaftDefinitionElevatorSideParameterIcon elevator side\\
                            \sTabs{4}[\underline{\emoji{⬆️}}\emoji{➡️}\emoji{⬇️}\emoji{⬅️}]};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-def-cp}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-def-s-bB.south west,anchor=north west] (scr-def-cp)
                            {\capitalDefinitionIcon capital\\
                            \sTabs{2}\capitalDefinitionLengthParameterIcon length[6m]\\
                            \sTabs{2}\capitalDefinitionWidthParameterIcon width[6m]\\
                            \sTabs{2}\capitalDefinitionHeightParameterIcon height[12m]\\
                            \sTabs{2}\capitalDefinitionLeftHeightParameterIcon left height[6m]\\
                            \sTabs{2}\capitalDefinitionRightHeightParameterIcon right height[6m]};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-def-c}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-def-cp-bB.south west,anchor=north west] (scr-def-c)
                            {\capsuleDefinitionIcon capsule\\
                            \sTabs{2}\capsuleDefinitionLengthParameterIcon length[4.2m]\\
                            \sTabs{2}\capsuleDefinitionWidthParameterIcon width[2.7m]\\
                            \sTabs{2}\capsuleDefinitionHeightParameterIcon height[2.5m]\\
                            \sTabs{2}\capsuleDefinitionDoorParameterIcon door[\underline{\emoji{⬇️}}\emoji{➡️}]\\
                            \sTabs{2}\capsuleDefinitionWindowParameterIcon window[\underline{\emoji{⬆️}}\emoji{⬅️}]};
                    \end{boundingBox}
                    \begin{boundingBox}{scr-def-br}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing and \scriptLegendInnerSep of scr-def-c-bB.south west,anchor=north west] (scr-def-br)
                            {\bridgeDefinitionIcon bridge\\
                            \sTabs{2}\bridgeDefinitionLeftLengthParameterIcon left length[2.7m]\\
                            \sTabs{2}\bridgeDefinitionRightLengthParameterIcon right length[2.7m]\\
                            \sTabs{2}\bridgeDefinitionWidthParameterIcon width[2.6m]\\
                            \sTabs{2}\bridgeDefinitionHeightParameterIcon height[2.75m]\\
                            \sTabs{2}\bridgeDefinitionToleranceParameterIcon tolerance[30cm]};
                    \end{boundingBox}
                    \begin{boundingBox}{scrs-mods}{semioTerm}{0cm}{0}{}
                        \begin{boundingBox}{scr-mods-m}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing*2 and \scriptLegendInnerSep*2 of scr-def-br-bB.south west,anchor=north west] (scr-mods-m)
                            {\emoji{\mirrorModificationIcon} mirror\\
                            \sTabs{2}\mirrorModificationPlaneIcon plane[\underline{\emoji{↕️}},\emoji{↔️}]};
                        \end{boundingBox}
                    \end{boundingBox}
                    \begin{boundingBox}{scrs-stc}{semioTerm}{0cm}{0}{}
                        \begin{boundingBox}{scr-stc-w}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing*3 and \scriptLegendInnerSep of scr-mods-m-bB.south west,anchor=north west] (scr-stc-w)
                            {\emoji{\capsuleStitchingIcon} connection\\
                            \sTabs{2}\capsuleStitchingSideParameterIcon façade\\
                            \sTabs{2}\capsuleStitchingFloorParameterIcon floor\\
                            \sTabs{2}\capsuleStitchingDoorParameterIcon door number};
                        \end{boundingBox}
                    \end{boundingBox}
                    \begin{boundingBox}{scrs-gnr}{semioTerm}{0cm}{0}{}
                        \begin{boundingBox}{scr-gnr-w}{semioSpecificTerm}{0}{0}{}
                        \node [align=left,below right=\fitSpacing*3 and \scriptLegendInnerSep of scr-stc-w-bB.south west,anchor=north west] (scr-gnr-w)
                            {\emoji{\windowGenerationIcon} orientation\\
                            \sTabs{2}\windowGenerationSideParameterIcon window side};
                        \end{boundingBox}
                    \end{boundingBox}
                    \end{boundingBox}
                \end{boundingBoxWithLabel}
            \end{boundingBox}}}

\tikzset{
    computation/.pic=
    {\begin{boundingBox}{comp}{semioTerm}{0}{0}{}
        \begin{scope}[rounded corners]
            \node[semioTerm] (iS) {\initialSchemeContent};
            \node[semioTermText,left=\horizontalSpacing of iS,align=right] (iSD) {\textsc{Initial} \\ \textsc{scheme}};
        
            \node[semioScheme,below=\verticalSpacing*2+0.6 of iS] (tBS) {\towerBSchemeContent};
            \node[semioScheme,left=\horizontalSpacing of tBS] (tAS) {\towerASchemeContent};
            \node[semioRule,right=\horizontalSpacing of tBS] (bTR) {\bridgeThreeRuleContent};
            \node[semioRule,right=\horizontalSpacing of bTR] (bSR) {\bridgeSixRuleContent};
            \node[semioRule,right=\horizontalSpacing of bSR] (bNR) {\bridgeNineRuleContent};
        
            \begin{scope}[scriptCall]
            \draw (iS.south) -- +(0,-\verticalSpacing) -| (tAS.north);
            \draw (iS.south) -- +(0,-\verticalSpacing) -| (tBS.north);
            \draw (iS.south) -- +(0,-\verticalSpacing) -| (bTR.north);
            \draw (iS.south) -- +(0,-\verticalSpacing) -| (bSR.north);
            \draw (iS.south) -- +(0,-\verticalSpacing) -| (bNR.north);
            \end{scope}
        
            \node[semioRule,below=\verticalSpacing*2+2.2 of tAS.south west,anchor=north west] (tAR) {\towerARuleContent};
            \node[semioScheme,right=\horizontalSpacing of tAR] (tASNS) {\towerASideNorthSchemeContent};
            \node[semioScheme,right=\horizontalSpacing of tASNS] (tASRS) {\dotsContent};
            \node[semioRule,right=\verticalSpacing of tASRS] (tBR) {\towerBRuleContent};
            \node[semioScheme,right=\horizontalSpacing of tBR] (tBSRS) {\dotsContent};
            \node[semioScheme,right=\horizontalSpacing of tBSRS] (tBSWS) {\towerBSideWestSchemeContent};
        
            \begin{scope}[scriptCall]
            \draw (tAS.south) -- +(0,-\verticalSpacing) -| (tAR.north);
            \draw (tAS.south) -- +(0,-\verticalSpacing) -| (tASNS.north);
            \draw (tAS.south) -- +(0,-\verticalSpacing) -| (tASRS.north);
        
            \draw (tBS.south) -- +(0,-\verticalSpacing-0.4) -| (tBR.north);
            \draw (tBS.south) -- +(0,-\verticalSpacing-0.4) -| (tBSRS.north);
            \draw (tBS.south) -- +(0,-\verticalSpacing-0.4) -| (tBSWS.north);
            \end{scope}
        
            \node[semioScheme,below=\verticalSpacing of tASNS] (tASNRR) {\dotsContent};
            \node[semioRule,below=\verticalSpacing*2+2.022 of tASRS] (tASRR) {\dotsContent};
            \node[semioRule,below=\verticalSpacing*2+2.022 of tBSRS] (tBSRR) {\dotsContent};
            \node[semioRule,below=\verticalSpacing*2+0.3 of tBSWS] (tBSWRR) {\dotsContent};
            
            \begin{scope}[scriptCall]
            \draw (tASNS.south) -- (tASNRR.north);
            \draw (tASRS.south) -- (tASRR.north);
            \draw (tBSRS.south) -- (tBSRR.north);
            \draw (tBSWS.south) -- (tBSWRR.north);
            \end{scope}
        
            \node[semioRule,below=\verticalSpacing*2+5 of tAR] (tARC) {\towerARuleContent};
            \node[semioRule,right=\horizontalSpacing of tARC] (tASNSFRC) {\towerASideNorthStackFirstContent};
            \node[semioRule,right=\horizontalSpacing of tASNSFRC] (tASNRRC) {\dotsContent};
            \node[semioRule,right=\horizontalSpacing of tASNRRC] (tBRC) {\towerBRuleContent};
            \node[semioRule,right=\horizontalSpacing of tBRC] (tBSRRC) {\dotsContent};
            \node[semioRule,right=\verticalSpacing of tBSRRC] (tBSWSSRC) {\towerBSideWestStackSecondContent};
            \node[semioRule,right=\horizontalSpacing of tBSWSSRC] (bTRC) {\bridgeThreeRuleContent};
            \node[semioRule,right=\horizontalSpacing of bTRC] (bSRC) {\bridgeSixRuleContent};
            \node[semioRule,right=\horizontalSpacing of bSRC] (bNRC) {\bridgeNineRuleContent};
        
            \node[semioTermText,right=\horizontalSpacing of bNRC, align=center] (sD) {\textsc{A}\\\textsc{r}\\\textsc{r}\\\textsc{a}\\\textsc{n}\\\textsc{g}\\\textsc{e}\\\textsc{m}\\\textsc{e}\\\textsc{n}\\\textsc{t}};
            \node [semioTerm,fit=(tARC)(tASNSFRC)(tASNRRC)(tBRC)(tBSRRC)(tBSWSSRC)(bTRC)(bSRC)(bNRC)] (iSB) {};
        
            \draw (tARC.east)[->]->(tASNSFRC.west);
            \draw (tASNSFRC.east)[->]->(tASNRRC.west);
            \draw (tASNRRC.east)[->]->(tBRC.west);
            \draw (tBRC.east)[->]->(tBSRRC.west);
            \draw (tBSRRC.east)[->]->(tBSWSSRC.west);
            \draw (tBSWSSRC.east)[->]->(bTRC.west);
            \draw (bTRC.east)[->]->(bSRC.west);
            \draw (bSRC.east)[->]->(bNRC.west);
        
            \begin{scope}[ruleCopy]
                \draw (tAR.south) -- (tARC.north);
                \draw (tASNRR.south) -- +(0,-\verticalSpacing) -| (tASNSFRC.north);
                \draw (tASNRR.south) -- +(0,-\verticalSpacing) -| (tASNRRC.north);  
                \draw (tASRR.south) -- +(0,-\verticalSpacing-0.8) -| (tASNRRC.north);
                \draw (tBR.south) -- ++(0,-\verticalSpacing-1.3) -| ++(-1.25,-2.9) -| (tBRC.north);
                \draw (tBSRR.south) -- +(0,-\verticalSpacing) -| (tBSRRC.north);
                \draw (tBSWRR.south) -- +(0,-\verticalSpacing*3) -| (tBSRRC.north);
                \draw (tBSWRR.south) -- +(0,-\verticalSpacing*3) -| (tBSWSSRC.north);
                \draw (bTR.south) |- ++(3,-\verticalSpacing-2.1) -- ++(0,-\verticalSpacing-6.5) -| (bTRC.north);
                \draw (bSR.south) |- ++(1.5,-\verticalSpacing-1.1) -| (bSRC.north);
                \draw (bNR.south) -- ++(0,-\verticalSpacing-0.1) -| (bNRC.60);
            \end{scope}
        
            \begin{scope}[xshift=2cm,yshift=-1.7cm]
                \node[semioTermText,below=\verticalSpacing*2+1 of iSB.south west,anchor= north west,align=left] (iLIT) {\textsc{I}\\\textsc{n}\\\textsc{i}\\\textsc{t}\\\textsc{i}\\\textsc{a}\\\textsc{l}};
                \node[semioTermText,right=0 of iLIT.north east,anchor= north west,align=left] (iLLT) {\textsc{F}\\\textsc{o}\\\textsc{r}\\\textsc{m}\\\textsc{a}\\\textsc{t}\\\textsc{i}\\\textsc{o}\\\textsc{n}};
                \node [fit=(iLIT)(iLLT)] (iLT) {};
            
                \pic (iL) at (-11.5,-21.1)  {iL};
                \pic (tAL) at (-10,-23.5)  {tAL};
                \pic (tASNSFL) at (-9.5,-23)  {tASNSFL};
                \pic (tASNSRL) at (-6,-23) {tASNSRL};
                \begin{scope}[xshift=-0.1cm]
                    \pic (tBL) at (-2,-23.1)  {tBL};
                    \pic (tBSWSSL) at (2,-23.1)  {tBSWSSL};
                    \pic (bTL) at (6,-23.1)  {bTL};
                \end{scope}
                \pic (bNL) at (11,-23.1)  {bNL};
            
                \begin{scope}[xshift=1cm]
                    \pic (iD) at (-14,-29.55) {iD};
                    \pic (tAD) at (-14+\designSpacing,-29.55) {tAD};
                    \pic (tASNSFD) at (-14+\designSpacing*2,-29.55) {tASNSFD};
                    \pic (tASNSRD) at (-14+\designSpacing*3,-29.55){tASNSRD};
                    \pic (tBD) at (-14+\designSpacing*4,-29.55) {tBD};
                    \pic (tBSWSSD) at (-14+\designSpacing*5,-29.55) {tBSWSSD};
                    \pic (bND) at (-14+\designSpacing*6,-29.55) {bND};
            
                    \node [semioTerm,fit=(iLb)] (iLB) {};
                    \node [semioLayout,fit=(tALb)(tALs)(tALcp)] (tALB) {};
                    \node [semioLayout,fit=(tASNSFLb0)(tASNSFLcp0)(tASNSFLc76)] (tASNSFLB) {};
                    \node [semioLayout,
                        fit=(tASNSRLb0)(tASNSRLcp0)
                        (tASNSRLc76)(tASNSRLc16)(tASNSRLc49)(tASNSRLc19)
                        (tASNSRLc57)(tASNSRLc8)(tASNSRLc83)(tASNSRLc41)] (tASNSRLB) {};
                    \node [semioLayout,
                        fit=(tBLb0)(tBLcp0)(tBLcp1)
                        (tBLc76)(tBLc16)(tBLc49)(tBLc19)
                        (tBLc57)(tBLc8)(tBLc83)(tBLc41)] (tBLB) {};
                    \node [semioLayout,
                        fit=(tBSWSSLb0)(tBSWSSLcp0)(tBSWSSLcp1)
                        (tBSWSSLc76)(tBSWSSLc16)(tBSWSSLc49)(tBSWSSLc19)
                        (tBSWSSLc57)(tBSWSSLc8)(tBSWSSLc83)(tBSWSSLc41)
                        (tBSWSSLc94)(tBSWSSLc141)(tBSWSSLc103)(tBSWSSLc124)
                        (tBSWSSLc112)(tBSWSSLc137)] (tBSWSSLB) {};
                    \node [semioLayout,
                        fit=(bTLb0)(bTLcp0)(bTLcp1)
                        (bTLc76)(bTLc16)(bTLc49)(bTLc19)
                        (bTLc57)(bTLc8)(bTLc83)(bTLc41)
                        (bTLc94)(bTLc141)(bTLc103)(bTLc124)
                        (bTLc112)(bTLc137)] (bTLB) {};
                    \node [semioLayout,
                        fit=(bNLb0)(bNLcp0)(bNLcp1)
                        (bNLc76)(bNLc16)(bNLc49)(bNLc19)
                        (bNLc57)(bNLc8)(bNLc83)(bNLc41)
                        (bNLc94)(bNLc141)(bNLc103)(bNLc124)
                        (bNLc112)(bNLc137)] (bNLB) {};
            
                    \draw[ruleInput] (tARC.200) -- +(0,-3) -| (iLB.north);
                    \draw[ruleOutput] (tARC.340) -- +(0,-2.4) -| (tALB.north);
                    \draw[ruleInput] (tASNSFRC.250) |- (tALB.east);
                    \draw[ruleOutput] (tASNSFRC.284) -- +(0,-\verticalSpacing-0.1) -| (tASNSFLB.north);
                    \draw[ruleInput] (tASNRRC.223) |- +(-1,-2.48) |- (tASNSFLB.east);
                    \draw[ruleOutput] (tASNRRC.320) -- +(0,-2.48) -| (tASNSRLB.north);
                    \draw[ruleInput] (tBRC.205) |- +(0.75,-2.42) |- (tASNSRLB.east);
                    \draw[ruleOutput] (tBRC.325) -- +(0,-2.42) |- (tBLB.west);
                    \draw[ruleInput] (tBSRRC.223) -- +(0,-2.48) -| (tBLB.north);
                    \draw[ruleOutput] (tBSWSSRC.292) -- +(0,-\verticalSpacing-0.1) -| (tBSWSSLB.north);
                    \draw[ruleInput] (bTRC.205) |- +(0.35,-2.42) |- (tBSWSSLB.east);
                    \draw[ruleOutput] (bTRC.325) -- +(0,-2.42) -| (bTLB.north);
                    \draw[ruleInput] (bSRC.205) |- +(1.7,-2.42) |- (bTLB.east);
                    \draw[ruleOutput] (bNRC.325) -- +(0,-2.42) -| (bNLB.north);
                    
                    \draw[resolvesTo] (iLB.south) -- (iDbB.north);
                    \draw[resolvesTo] (tALB.south) |- (tADbB.west);
                    \draw[resolvesTo] (tASNSFLB.south) |- ++(1.8,-\verticalSpacing) |- (tASNSFDbB.west);
                    \draw[resolvesTo] (tASNSRLB.south) |- ++(2.15,-\verticalSpacing) |- (tASNSRDbB.west);
                    \draw[resolvesTo] (tBLB.south) |- ++(2.2,-\verticalSpacing) |- (tBDbB.west);
                    \draw[resolvesTo] (tBSWSSLB.south) |- ++(2.1,-\verticalSpacing) |- (tBSWSSDbB.west);
                    \draw[resolvesTo] (bNLB.south) |- ++(-2.15,-\verticalSpacing) |- (bNDbB.west);
            
                    \node[semioTermText,right=\horizontalSpacing+0.35 of bNDbB.east,anchor=east,align=center] (DD) {\textsc{D}\\\textsc{e}\\\textsc{s}\\\textsc{i}\\\textsc{g}\\\textsc{n}};
                \end{scope}
            \end{scope} 
        \end{scope}
    \end{boundingBox}}}

\pgfdeclarelayer{background layer}
\pgfdeclarelayer{knots}
\pgfdeclarelayer{ports}
\pgfsetlayers{background layer,main,knots,ports}

\begin{document}

% \begin{tikzpicture}
%     \pic(artifacts) {artifacts};
%     \pic(computation) at(21.7cm,2.5cm) {computation};
% \end{tikzpicture}

\begin{tikzpicture}
   \pic(artifacts) {artifacts};
\end{tikzpicture}

%  \begin{tikzpicture}
%      \pic(computation) {computation};
%  \end{tikzpicture}

\end{document}